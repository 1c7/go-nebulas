<!doctype>
<html>

<head>
<!-- <script type="text/javascript" src="../node_modules/bignumber.js/bignumber.min.js"></script> -->
<!--<script type="text/javascript" src="../dist/neb.js"></script>-->
    <!--<script type="text/javascript" src="../dist/account.js"></script>-->
    <script type="text/javascript" src="../dist/wallet.js"></script>
<script type="text/javascript">


    var Wallet = require("wallet");
    var neb = new Wallet.Neb();
    neb.setRequest(new Wallet.Neb.HttpRequest("http://localhost:8685"));

//    var Account = require('account');
//
//    var Transaction = require('transaction');

    function createExampleAccount() {
        var allAccounts = neb.api.accounts();
        var content = "";
        for (var i = 0; i < allAccounts.addresses.length; i++) {
            content += '<li>'+allAccounts.addresses[i]+'</li>'
        }

        // document.getElementById('result').innerText = 'create: ' + account;
        document.getElementById('all-account').innerText = content;
    }

    function generateAddress() {
//        var account = Account.newAccount();
//        document.getElementById('new-account').innerText = account.getAddressString();
//
//        var tx = new Transaction(100, account, account, "10", 1);
//        tx.signTransaction();
//        console.log(JSON.stringify(tx));
//        var data = tx.toProto();
//        console.log(data);

        var account = Wallet.Account.NewAccount();
        document.getElementById('new-account').innerText = account.getAddressString();
        var tx = new Wallet.Transaction(100, account, account, "10", 1);
        tx.signTransaction();
//        console.log("price:"+tx.gasPrice.toString());
//        console.log("time:"+tx.timestamp);
//        console.log("hash:"+tx.hash.toString("hex"));
//        console.log("hash:"+tx.hash.toString("hex"));
        console.log(JSON.stringify(tx));
        var data = tx.toProto();
//        console.log("data:"+data);
        document.getElementById('tx-data').innerText = data;
    }

</script>
</head>
<body>
    <h1>List account</h1>
    <div>
        <button type="button" onClick="createExampleAccount();">list account</button>
    </div>
    <div id="result"></div>
    <div id="all-account"></div>

    <div>
        <button type="button" onClick="generateAddress();">new account</button>
    </div>
    <div id="new-account"></div>
    <div id="tx-data"></div>
</body>
</html>

